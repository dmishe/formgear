{%- macro view(name, field, prefix) %}
  <h3>{{ name }}</h3>
  <p>{{ field.value | join(', ') }}</p>
{%- endmacro %}

{%- macro edit(name, field, prefix) %}
<div class="control-group {% if field.errors %}error{% endif %}">
  <label for="form_{{ name }}_id">{{ field.title }}</label>
    <div class="controls">
      {% if field.choices %}
      {% for key, val in field.choices %}
        <label class="checkbox">
          <input name="{{ prefix }}{{ name }}" type="checkbox"
            value="{{ key }}" {% if key in field.value %}checked{% endif %} />
          {{ val }}
        </label>
      {% endfor %}
      {% else %}
        <label class="checkbox">
        <input name="{{ prefix }}{{ name }}" type="checkbox" id="form_{{ name }}_id"
               value="1" /> {{ field.title }}</label>
      {% endif %}
    </div>
    {% if field.errors %}<span class="help-inline">{{ field.errors|join(', ') }}</span>{% endif %}
    {% if field.description %}<span class="help-block">{{ field.description }}</span>{% endif %}
</div>
{%- endmacro %}
